build:
  python_version: "3.10"
  python_requirements: "requirements_replicate.txt"
  system_packages:
    - ffmpeg
    - libgl1
    - libsndfile1
    - libavcodec-extra
  run:
    - pip install huggingface_hub
    - pip install hf-transfer
    - export HF_HUB_ENABLE_HF_TRANSFER=1
    - pip install --index-url https://download.pytorch.org/whl/cu121 torch torchvision torchaudio
    - mkdir -p weights
    - huggingface-cli download MeiGen-AI/InfiniteTalk --local-dir weights/InfiniteTalk --ignore-patterns ".git*"
    - huggingface-cli download Wan-AI/Wan2.1-I2V-14B-480P --local-dir weights/Wan2.1-I2V-14B-480P --ignore-patterns ".git*"
    - huggingface-cli download TencentGameMate/chinese-wav2vec2-base --local-dir weights/chinese-wav2vec2-base --ignore-patterns ".git*"


predict: "predict.py:Predictor"
